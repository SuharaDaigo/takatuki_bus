<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>席の予約システム</title>
    <style>
      .parent {
        display: flex;
      }
      .sun {
        padding: 10px 10px;
        margin: 10px;
        border: 4px solid #000;
        height: 370px;
        width: 1050px;
      }
      .senaka {
        padding: 20px 10px;
        margin: 0px 0px -20px -30px;
        border: 4px solid #000;
        display: block;
        cursor: pointer;
        border-radius: 10px;
        height: 40px;
        width: 1px;
      }
      .seat {
        padding: 20px 10px;
        margin: 0px 0px 0px 40px;
        border: 4px solid #000;
        font-size: 35px;
        text-indent: -5px;
        font-family: "arialblack", "sans-serif";
        display: block;
        cursor: pointer;
        border-radius: 9px;
        height: 40px;
        width: 60px;
      }
      .untenseki1 {
        padding: 20px 10px;
        margin: 0px 0px 0px 40px;
        display: block;
        border-right: 6px double #000;
        border-top: 6px double #000;
        height: 40px;
        width: 60px;
      }
      .untenseki2 {
        padding: 20px 10px;
        margin: 0px 0px 0px 40px;
        display: block;
        border-right: 6px double #000;
        border-bottom: 6px double #000;
        height: 40px;
        width: 60px;
      }
      .noru {
        padding: 20px 10px;
        margin: 20px 0px 0px 40px;
        border: 4px double #000;
        display: block;
        height: 20px;
        width: 60px;
      }
      .kieru {
        pointer-events: none;
        opacity: 0;
      }

      .reserved {
        background-color: #a4c6ff;
        pointer-events: none;
        opacity: 0.5;
      }
      .seat.selected {
        background-color: #5d99ff;
        pointer-events: auto;
        opacity: 1;
      }
    </style>
  </head>
  <body>
    <div id="seats" class="sun">
      <div class="parent">
        <div class="untenseki1"></div>
        <div class="senaka kieru"></div>
        <div class="seat" data-seat-number="1" onclick="reserveSeat(1)">
          &nbsp;1
        </div>
        <div class="senaka" onclick="reserveSeat(1)"></div>
        <div class="seat" data-seat-number="2" onclick="reserveSeat(2)">
          &nbsp;2
        </div>
        <div class="senaka" onclick="reserveSeat(2)"></div>
        <div class="seat" data-seat-number="3" onclick="reserveSeat(3)">
          &nbsp;3
        </div>
        <div class="senaka" onclick="reserveSeat(3)"></div>
        <div class="seat" data-seat-number="4" onclick="reserveSeat(4)">
          &nbsp;4
        </div>
        <div class="senaka" onclick="reserveSeat(4)"></div>
        <div class="seat" data-seat-number="5" onclick="reserveSeat(5)">
          &nbsp;5
        </div>
        <div class="senaka" onclick="reserveSeat(5)"></div>
        <div class="seat" data-seat-number="6" onclick="reserveSeat(6)">
          &nbsp;6
        </div>
        <div class="senaka" onclick="reserveSeat(6)"></div>
        <div class="seat" data-seat-number="7" onclick="reserveSeat(7)">
          &nbsp;7
        </div>
        <div class="senaka" onclick="reserveSeat(7)"></div>
        <!-- Repeat similar blocks for seats 2 to 7 -->
      </div>
      <div class="parent">
        <div class="untenseki2"></div>
        <div class="senaka kieru"></div>
        <div class="seat" data-seat-number="8" onclick="reserveSeat(8)">
          &nbsp;8
        </div>
        <div class="senaka" onclick="reserveSeat(8)"></div>
        <div class="seat" data-seat-number="9" onclick="reserveSeat(9)">
          &nbsp;9
        </div>
        <div class="senaka" onclick="reserveSeat(9)"></div>
        <div class="seat" data-seat-number="10" onclick="reserveSeat(10)">
          &nbsp;10
        </div>
        <div class="senaka" onclick="reserveSeat(10)"></div>
        <div class="seat" data-seat-number="11" onclick="reserveSeat(11)">
          &nbsp;11
        </div>
        <div class="senaka" onclick="reserveSeat(11)"></div>
        <div class="seat" data-seat-number="12" onclick="reserveSeat(12)">
          &nbsp;12
        </div>
        <div class="senaka" onclick="reserveSeat(12)"></div>
        <div class="seat" data-seat-number="13" onclick="reserveSeat(13)">
          &nbsp;13
        </div>
        <div class="senaka" onclick="reserveSeat(13)"></div>
        <div class="seat" data-seat-number="14" onclick="reserveSeat(14)">
          &nbsp;14
        </div>
        <div class="senaka" onclick="reserveSeat(14)"></div>
        <!-- Repeat similar blocks for seats 8 to 14 -->
      </div>
      <div class="parent">
        <div class="seat" data-seat-number="15" onclick="reserveSeat(15)">
          &nbsp;15
        </div>
        <div class="senaka" onclick="reserveSeat(15)"></div>
        <!-- Repeat similar blocks for seats 15 -->
      </div>
      <div class="parent">
        <div class="noru">搭乗口</div>
        <div class="seat" data-seat-number="16" onclick="reserveSeat(16)">
          &nbsp;16
        </div>
        <div class="senaka" onclick="reserveSeat(16)"></div>
        <div class="seat" data-seat-number="17" onclick="reserveSeat(17)">
          &nbsp;17
        </div>
        <div class="senaka" onclick="reserveSeat(17)"></div>
        <div class="seat" data-seat-number="18" onclick="reserveSeat(18)">
          &nbsp;18
        </div>
        <div class="senaka" onclick="reserveSeat(18)"></div>
        <div class="seat" data-seat-number="19" onclick="reserveSeat(19)">
          &nbsp;19
        </div>
        <div class="senaka" onclick="reserveSeat(19)"></div>
        <div class="seat" data-seat-number="20" onclick="reserveSeat(20)">
          &nbsp;20
        </div>
        <div class="senaka" onclick="reserveSeat(20)"></div>
        <div class="seat" data-seat-number="21" onclick="reserveSeat(21)">
          &nbsp;21
        </div>
        <div class="senaka" onclick="reserveSeat(21)"></div>
        <div class="seat" data-seat-number="22" onclick="reserveSeat(22)">
          &nbsp;22
        </div>
        <div class="senaka" onclick="reserveSeat(22)"></div>
        <!-- Repeat similar blocks for seats 16 to 22 -->
      </div>
    </div>

    <button onclick="confirmReservation()">予約決定</button>

    <script>
      let selectedSeatNumber = null;

      function reserveSeat(seatNumber) {
        if (selectedSeatNumber) {
          document
            .querySelector(
              `#seats .seat[data-seat-number="${selectedSeatNumber}"]`
            )
            .classList.remove("selected");
        }
        document
          .querySelector(`#seats .seat[data-seat-number="${seatNumber}"]`)
          .classList.add("selected");
        selectedSeatNumber = seatNumber;
      }

      function confirmReservation() {
        if (selectedSeatNumber) {
          fetch("/yoyaku", {
            method: "POST",
            headers: {
              "Content-Type": "application/x-www-form-urlencoded",
            },
            body: `seat_number=${selectedSeatNumber}`,
          })
            .then((response) => response.text())
            .then((data) => {
              alert(data);
            });
        } else {
          alert("席を選択してください。");
        }
      }
    </script>
  </body>
</html>
